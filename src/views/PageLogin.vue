<template>
  <form id="myForm" @submit.prevent="onSubmit">
    <input class="form_el" type="text" name="name" placeholder="PASSWORD"
           maxlength="6" pattern="^[0-9]+$"
           style="-webkit-text-security: disc;" v-model="this.password"/>
    <button class="form_el" type="submit">LOGIN</button>
  </form>
</template>
<script>
import {getAuth, signInWithEmailAndPassword} from "firebase/auth";

export default {
  name : "PageLogin",
  data() {
    return {
      message : "Hello Vue",
      password : "",
    };
  },
  methods : {
    onSubmit() {
      console.log(event);
      const auth = getAuth();
      console.log(this.password);
      signInWithEmailAndPassword(auth, "dol2156@gmail.com", this.password)
        .then((userCredential) => {
          // Signed in
          const user = userCredential.user;
          const email = user.email;
          if (email === "dol2156@gmail.com") {
            // 로그인 성공
            this.$router.push("/main");
          }
        })
        .catch((error) => {
          const errorCode = error.code;
          console.log("errorCode : ", errorCode);
          alert(errorCode);
          
          const errorMessage = error.message;
          console.log("errorMessage : ", errorMessage);
        });
    },
  },
}
</script>
<style lang="scss" scoped>
$FORM_EL_HEI:55px;
#myForm{
  outline:1px dashed red; box-shadow:0px 0px 10px cornflowerblue;
  z-index:0; position:absolute; top:0px; left:0px;
  width:100%; height:100%; padding:10px;
  background-color:#333333;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  
  .form_el{
    display:block;
    width:100%; height:$FORM_EL_HEI; padding:0 10px;
    border:1px solid #333333;
    font-size:16px; text-align:center;
    
    + .form_el{
      margin-top:10px;
    }
  }
}
</style>